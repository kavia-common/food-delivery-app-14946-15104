{"is_source_file": true, "format": "Python", "description": "Source code for a FastAPI-based location tracking service. Defines data models for geographic points and location updates, maintains in-memory storage of latest locations per order, and exposes REST endpoints for submitting updates and retrieving latest locations with ETA estimates.", "external_files": ["fastapi", "pydantic", "datetime"], "external_methods": ["FastAPI", "HTTPException", "CORSMiddleware", "Field", "validator"], "published": ["post_location_update", "get_latest_location", "get_app"], "classes": [{"name": "GeoPoint", "description": "Represents a geographic coordinate (latitude, longitude)."}, {"name": "LocationUpdate", "description": "Incoming payload from courier app to update live location, with validation for timestamp."}, {"name": "LocationSnapshot", "description": "Latest location snapshot for an order, including ETA."}], "methods": [{"name": "post_location_update(update: LocationUpdate)", "description": "Accepts a live location update and stores the latest snapshot for the given orderId.", "scope": "", "scopeKind": ""}, {"name": "get_latest_location(orderId: str)", "description": "Fetches the latest known location snapshot for a specific order.", "scope": "", "scopeKind": ""}, {"name": "FastAPI get_app()", "description": "Factory function returning the FastAPI application instance.", "scope": "", "scopeKind": ""}, {"name": "Optional[int] _estimate_eta_minutes(speed_mps: Optional[float])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "datetime ensure_timezone(cls, v: datetime)", "scope": "LocationUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "root()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["LocationUpdate", "LocationSnapshot", "_estimate_eta_minutes", "app.add_middleware", "app.post", "app.get", "root"], "search-terms": ["LocationService", "LocationUpdate", "LocationSnapshot", "/location/updates", "/location/track/{orderId}", "FastAPI", "Location", "ETA"], "state": 2, "file_id": 3, "knowledge_revision": 7, "git_revision": "", "ctags": [{"_type": "tag", "name": "GeoPoint", "path": "/home/kavia/workspace/code-generation/food-delivery-app-14946-15104/LocationService/app/main.py", "pattern": "/^class GeoPoint(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "LocationSnapshot", "path": "/home/kavia/workspace/code-generation/food-delivery-app-14946-15104/LocationService/app/main.py", "pattern": "/^class LocationSnapshot(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "LocationUpdate", "path": "/home/kavia/workspace/code-generation/food-delivery-app-14946-15104/LocationService/app/main.py", "pattern": "/^class LocationUpdate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_LOCATION_STORE", "path": "/home/kavia/workspace/code-generation/food-delivery-app-14946-15104/LocationService/app/main.py", "pattern": "/^_LOCATION_STORE: Dict[str, LocationSnapshot] = {}$/", "language": "Python", "typeref": "typename:Dict[str, LocationSnapshot]", "kind": "variable"}, {"_type": "tag", "name": "_estimate_eta_minutes", "path": "/home/kavia/workspace/code-generation/food-delivery-app-14946-15104/LocationService/app/main.py", "pattern": "/^def _estimate_eta_minutes(speed_mps: Optional[float]) -> Optional[int]:$/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "function", "signature": "(speed_mps: Optional[float])"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/food-delivery-app-14946-15104/LocationService/app/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "bearing", "path": "/home/kavia/workspace/code-generation/food-delivery-app-14946-15104/LocationService/app/main.py", "pattern": "/^    bearing: Optional[float] = Field(None, description=\"Heading in degrees\")$/", "language": "Python", "typeref": "typename:Optional[float]", "kind": "variable", "scope": "LocationUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "courierId", "path": "/home/kavia/workspace/code-generation/food-delivery-app-14946-15104/LocationService/app/main.py", "pattern": "/^    courierId: str = Field(..., description=\"Courier\\/agent identifier\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "LocationUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "ensure_timezone", "path": "/home/kavia/workspace/code-generation/food-delivery-app-14946-15104/LocationService/app/main.py", "pattern": "/^    def ensure_timezone(cls, v: datetime) -> datetime:$/", "language": "Python", "typeref": "typename:datetime", "kind": "member", "signature": "(cls, v: datetime)", "scope": "LocationUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "etaMinutes", "path": "/home/kavia/workspace/code-generation/food-delivery-app-14946-15104/LocationService/app/main.py", "pattern": "/^    etaMinutes: Optional[int] = Field(None, description=\"Estimated minutes to arrival\")$/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "LocationSnapshot", "scopeKind": "class"}, {"_type": "tag", "name": "get_app", "path": "/home/kavia/workspace/code-generation/food-delivery-app-14946-15104/LocationService/app/main.py", "pattern": "/^def get_app() -> FastAPI:$/", "language": "Python", "typeref": "typename:FastAPI", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_latest_location", "path": "/home/kavia/workspace/code-generation/food-delivery-app-14946-15104/LocationService/app/main.py", "pattern": "/^def get_latest_location(orderId: str):$/", "language": "Python", "kind": "function", "signature": "(orderId: str)"}, {"_type": "tag", "name": "lat", "path": "/home/kavia/workspace/code-generation/food-delivery-app-14946-15104/LocationService/app/main.py", "pattern": "/^    lat: float = Field(..., description=\"Latitude in decimal degrees\", ge=-90, le=90)$/", "language": "Python", "typeref": "typename:float", "kind": "variable", "scope": "GeoPoint", "scopeKind": "class"}, {"_type": "tag", "name": "lng", "path": "/home/kavia/workspace/code-generation/food-delivery-app-14946-15104/LocationService/app/main.py", "pattern": "/^    lng: float = Field(..., description=\"Longitude in decimal degrees\", ge=-180, le=180)$/", "language": "Python", "typeref": "typename:float", "kind": "variable", "scope": "GeoPoint", "scopeKind": "class"}, {"_type": "tag", "name": "orderId", "path": "/home/kavia/workspace/code-generation/food-delivery-app-14946-15104/LocationService/app/main.py", "pattern": "/^    orderId: str = Field(..., description=\"Order identifier\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "LocationUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "position", "path": "/home/kavia/workspace/code-generation/food-delivery-app-14946-15104/LocationService/app/main.py", "pattern": "/^    position: GeoPoint = Field(..., description=\"Current geo position of the courier\")$/", "language": "Python", "typeref": "typename:GeoPoint", "kind": "variable", "scope": "LocationUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "position", "path": "/home/kavia/workspace/code-generation/food-delivery-app-14946-15104/LocationService/app/main.py", "pattern": "/^    position: GeoPoint = Field(..., description=\"Latest known position\")$/", "language": "Python", "typeref": "typename:GeoPoint", "kind": "variable", "scope": "LocationSnapshot", "scopeKind": "class"}, {"_type": "tag", "name": "post_location_update", "path": "/home/kavia/workspace/code-generation/food-delivery-app-14946-15104/LocationService/app/main.py", "pattern": "/^def post_location_update(update: LocationUpdate):$/", "language": "Python", "kind": "function", "signature": "(update: LocationUpdate)"}, {"_type": "tag", "name": "root", "path": "/home/kavia/workspace/code-generation/food-delivery-app-14946-15104/LocationService/app/main.py", "pattern": "/^def root():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "speedMps", "path": "/home/kavia/workspace/code-generation/food-delivery-app-14946-15104/LocationService/app/main.py", "pattern": "/^    speedMps: Optional[float] = Field(None, description=\"Speed in meters per second\", ge=0)$/", "language": "Python", "typeref": "typename:Optional[float]", "kind": "variable", "scope": "LocationUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "timestamp", "path": "/home/kavia/workspace/code-generation/food-delivery-app-14946-15104/LocationService/app/main.py", "pattern": "/^    timestamp: datetime = Field(..., description=\"Timestamp of the latest position (UTC)\")$/", "language": "Python", "typeref": "typename:datetime", "kind": "variable", "scope": "LocationSnapshot", "scopeKind": "class"}, {"_type": "tag", "name": "timestamp", "path": "/home/kavia/workspace/code-generation/food-delivery-app-14946-15104/LocationService/app/main.py", "pattern": "/^    timestamp: datetime = Field(..., description=\"Timestamp of the location sample (ISO 8601)\")$/", "language": "Python", "typeref": "typename:datetime", "kind": "variable", "scope": "LocationUpdate", "scopeKind": "class"}], "hash": "d8ce336ce930f8b9fcf6478552cb3b66", "format-version": 4, "code-base-name": "LocationService", "filename": "LocationService/app/main.py", "fields": [{"name": "Dict[str, LocationSnapshot] _LOCATION_STORE", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[float] bearing", "scope": "LocationUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "str courierId", "scope": "LocationUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[int] etaMinutes", "scope": "LocationSnapshot", "scopeKind": "class", "description": "unavailable"}, {"name": "float lat", "scope": "GeoPoint", "scopeKind": "class", "description": "unavailable"}, {"name": "float lng", "scope": "GeoPoint", "scopeKind": "class", "description": "unavailable"}, {"name": "str orderId", "scope": "LocationUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "GeoPoint position", "scope": "LocationUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[float] speedMps", "scope": "LocationUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "datetime timestamp", "scope": "LocationSnapshot", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"7": ""}]}